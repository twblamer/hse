name: make
on: [push]
jobs:
  build:
    runs-on: ubuntu-18.04
    steps:
    - uses: actions/checkout@v2
      with:
        path: hse
    - uses: actions/checkout@v2
      with:
        path: mpool
        repository: hse-project/mpool
    - uses: lukka/get-cmake@latest
    - name: make libmpool
      run: |
        sudo apt-get install autopoint gettext uuid-dev uuid-runtime
        make release config
        make release
        sudo make install
      working-directory: mpool
    - name: make hse
      run: |
        sudo apt-get install autopoint gettext uuid-dev uuid-runtime
        make release config
        make release
        make release test
      working-directory: hse
